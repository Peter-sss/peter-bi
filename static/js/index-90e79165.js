var v=(m,c,a)=>new Promise((_,o)=>{var i=t=>{try{r(a.next(t))}catch(s){o(s)}},e=t=>{try{r(a.throw(t))}catch(s){o(s)}},r=t=>t.done?_(t.value):Promise.resolve(t.value).then(i,e);r((a=a.apply(m,c)).next())});import{d as j,j as d,aN as h,ba as I,a2 as R,aG as T,a as u,o as k,E as B,w as p,b as l,u as E,U as x,V as y,n as b,t as U,s as V,e as z,ae as A,R as K,aa as M,h as D}from"./index-f1b62783.js";import{i as F}from"./icon-14375a60.js";import{u as J,E as O,P as G}from"./chartEditStore-486ae2f4.js";import{u as H}from"./project.api-a6799795.js";import{u as L}from"./useSync.hook-f803091a.js";import"./plugin-a824adf1.js";import"./chartLayoutStore-ce407c49.js";import"./index-22e48ee0.js";import"./SettingItem-d0566dd6.js";/* empty css                                                                      */import"./SettingItemBox-6b455d4c.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-3590d83e.js";import"./index.esm.min-98f3d51a.js";import"./fileTypeEnum-21359a08.js";const $=z(" 工作空间 - "),q={class:"title"},Q=j({__name:"index",setup(m){const c=J(),{dataSyncUpdate:a}=L(),{FishIcon:_}=F.ionicons5,o=d(!1),i=d(null),e=d(h());I(()=>{e.value=c.getProjectInfo.projectName||""});const r=R(()=>{e.value=e.value.replace(/\s/g,"");const n=e.value.length?e.value:"新项目";return T(`工作空间-${n}`),c.setEditCanvasConfig(O.PROJECT_NAME,n),n}),t=()=>{o.value=!0,A(()=>{i.value&&i.value.focus()})},s=()=>v(this,null,function*(){o.value=!1,c.setProjectInfo(G.PROJECT_NAME,e.value||"");const n=yield H({id:h(),projectName:e.value});n&&n.code===K.SUCCESS?a():M()});return(n,f)=>{const C=u("n-icon"),w=u("n-button"),S=u("n-text"),g=u("n-input"),N=u("n-space");return k(),B(N,null,{default:p(()=>[l(C,{size:"20",depth:3},{default:p(()=>[l(E(_))]),_:1}),l(S,{onClick:t},{default:p(()=>[$,x(l(w,{secondary:"",size:"tiny"},{default:p(()=>[b("span",q,U(E(r)),1)]),_:1},512),[[y,!o.value]])]),_:1}),x(l(g,{ref_key:"inputInstRef",ref:i,size:"small",type:"text",maxlength:"16","show-count":"",placeholder:"请输入项目名称",value:e.value,"onUpdate:value":f[0]||(f[0]=P=>e.value=P),valueModifiers:{trim:!0},onKeyup:V(s,["enter"]),onBlur:s},null,8,["value","onKeyup"]),[[y,o.value]])]),_:1})}}});const pe=D(Q,[["__scopeId","data-v-4af849d3"]]);export{pe as default};
