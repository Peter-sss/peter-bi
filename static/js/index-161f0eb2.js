var G=(f,E,g)=>new Promise((S,h)=>{var I=d=>{try{o(g.next(d))}catch(p){h(p)}},c=d=>{try{o(g.throw(d))}catch(p){h(p)}},o=d=>d.done?S(d.value):Promise.resolve(d.value).then(I,c);o((g=g.apply(f,E)).next())});import{d as _e,l as U,ab as ue,aB as y,M as pe,b as a,o as _,c as k,e,w as t,u as s,q as b,a6 as N,R as me,U as fe,f as u,t as O,cm as R,D as w,cP as ge,F as V,s as H,H as F,aa as ve,cQ as Ce,B as be,C as he,j as ye}from"./index-6978caf2.js";import{F as P}from"./fileTypeEnum-21359a08.js";import{u as ke,E as m}from"./chartEditStore-e9bb1111.js";/* empty css                                                                      */import{l as we}from"./index-25870e5b.js";import{i as M}from"./icon-7aaa208c.js";import{S as Ee}from"./StylesSetting-167ffbba.js";import"./plugin-7d96af29.js";import"./SettingItem-a1487df3.js";import"./SettingItemBox-a883c2e6.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-510c6a90.js";import"./logo-aa8b8747.js";const Se="/static/png/noImage.png",Ie=f=>(be("data-v-bcb3ba8f"),f=f(),he(),f),Te={class:"go-canvas-setting"},ze={class:"upload-box"},Le=["src"],xe={class:"upload-img"},Ue=Ie(()=>b("img",{src:Se},null,-1)),Oe=u("背景颜色"),Re={class:"picker-height"},Fe=u("应用类型"),Pe=u("背景控制"),Be=u(" 清除背景 "),Ae=u(" 清除颜色 "),De=u("适配方式"),Ge=_e({__name:"index",setup(f){const{ColorPaletteIcon:E}=M.ionicons5,{ScaleIcon:g,FitToScreenIcon:S,FitToHeightIcon:h,FitToWidthIcon:I}=M.carbon,c=ke(),o=c.getEditCanvasConfig,d=c.getEditCanvas,p=U(),T=U(!1),z=U(0),Y=we(()=>ue(()=>import("./index-3db181d1.js"),["static/js/index-3db181d1.js","static/js/index-6978caf2.js","static/css/index-79930e9d.css","static/js/chartEditStore-e9bb1111.js","static/js/plugin-7d96af29.js","static/js/icon-7aaa208c.js","static/js/index-25870e5b.js","static/css/index-3486f0f1.css","static/css/index-39f06c17.css"])),$=[{label:"应用颜色",value:0},{label:"应用背景",value:1}],X=[{key:"ChartTheme",title:"主题颜色",icon:E,render:Y}],K=[{key:y.FIT,title:"自适应",icon:g,desc:"自适应比例展示，页面会有留白"},{key:y.SCROLL_Y,title:"Y轴滚动",icon:I,desc:"X轴铺满，Y轴自适应滚动"},{key:y.SCROLL_X,title:"X轴滚动",icon:h,desc:"Y轴铺满，X轴自适应滚动"},{key:y.FULL,title:"铺满",icon:S,desc:"强行拉伸画面，填充所有视图"}];pe(()=>o.selectColor,l=>{z.value=l?0:1},{immediate:!0});const B=l=>l>50,A=()=>{c.computedScale()},j=i=>G(this,[i],function*({file:l}){p.value=[];const r=l.file.type;return l.file.size>1024*1024*R?(window.$message.warning(`图片超出 ${R}M 限制，请重新上传！`),!1):r!==P.PNG&&r!==P.JPEG&&r!==P.GIF?(window.$message.warning("文件格式不符合，请重新上传！"),!1):!0}),q=l=>{o.selectColor=l==0},W=()=>{c.setEditCanvasConfig(m.BACKGROUND_IMAGE,void 0),c.setEditCanvasConfig(m.SELECT_COLOR,!0)},J=()=>{T.value=!0,setTimeout(()=>{T.value=!1})},Q=()=>{c.setEditCanvasConfig(m.BACKGROUND,void 0),o.backgroundImage&&c.setEditCanvasConfig(m.SELECT_COLOR,!1),J()},Z=l=>{const{file:i}=l;ve(()=>{if(i.file){const r=Ce(i.file);c.setEditCanvasConfig(m.BACKGROUND_IMAGE,r),c.setEditCanvasConfig(m.SELECT_COLOR,!1)}else window.$message.error("添加图片失败，请稍后重试！")})},ee=l=>{c.setEditCanvasConfig(m.PREVIEW_SCALE_TYPE,l)};return(l,i)=>{const r=a("n-input-number"),L=a("n-form-item"),te=a("n-form"),C=a("n-text"),oe=a("n-upload-dragger"),ne=a("n-upload"),se=a("n-color-picker"),v=a("n-space"),ae=a("n-select"),x=a("n-button"),D=a("n-icon"),le=a("n-tooltip"),ie=a("n-button-group"),ce=a("n-divider"),de=a("n-tab-pane"),re=a("n-tabs");return _(),k("div",Te,[e(te,{inline:"","label-width":45,size:"small","label-placement":"left"},{default:t(()=>[e(L,{label:"宽度"},{default:t(()=>[e(r,{size:"small",value:s(o).width,"onUpdate:value":[i[0]||(i[0]=n=>s(o).width=n),A],disabled:s(d).lockScale,validator:B},null,8,["value","disabled"])]),_:1}),e(L,{label:"高度"},{default:t(()=>[e(r,{size:"small",value:s(o).height,"onUpdate:value":[i[1]||(i[1]=n=>s(o).height=n),A],disabled:s(d).lockScale,validator:B},null,8,["value","disabled"])]),_:1})]),_:1}),b("div",ze,[e(ne,{"file-list":p.value,"onUpdate:file-list":i[2]||(i[2]=n=>p.value=n),"show-file-list":!1,customRequest:Z,onBeforeUpload:j},{default:t(()=>[e(oe,null,{default:t(()=>[s(o).backgroundImage?(_(),k("img",{key:0,class:"upload-show",src:s(o).backgroundImage,alt:"背景"},null,8,Le)):N("",!0),me(b("div",xe,[Ue,e(C,{class:"upload-desc",depth:"3"},{default:t(()=>[u(" 背景图需小于 "+O(s(R))+"M ，格式为 png/jpg/gif 的文件 ",1)]),_:1})],512),[[fe,!s(o).backgroundImage]])]),_:1})]),_:1},8,["file-list"])]),e(v,{vertical:"",size:12},{default:t(()=>[e(v,null,{default:t(()=>[e(C,null,{default:t(()=>[Oe]),_:1}),b("div",Re,[T.value?N("",!0):(_(),w(se,{key:0,size:"small",style:{width:"250px"},value:s(o).background,"onUpdate:value":i[3]||(i[3]=n=>s(o).background=n),showPreview:!0,swatches:s(ge)},null,8,["value","swatches"]))])]),_:1}),e(v,null,{default:t(()=>[e(C,null,{default:t(()=>[Fe]),_:1}),e(ae,{size:"small",style:{width:"250px"},value:z.value,"onUpdate:value":[i[4]||(i[4]=n=>z.value=n),q],disabled:!s(o).backgroundImage,options:$},null,8,["value","disabled"])]),_:1}),e(v,null,{default:t(()=>[e(C,null,{default:t(()=>[Pe]),_:1}),e(x,{class:"clear-btn",size:"small",disabled:!s(o).backgroundImage,onClick:W},{default:t(()=>[Be]),_:1},8,["disabled"]),e(x,{class:"clear-btn",size:"small",disabled:!s(o).background,onClick:Q},{default:t(()=>[Ae]),_:1},8,["disabled"])]),_:1}),e(v,null,{default:t(()=>[e(C,null,{default:t(()=>[De]),_:1}),e(ie,null,{default:t(()=>[(_(),k(V,null,H(K,n=>e(x,{key:n.key,type:s(o).previewScaleType===n.key?"primary":"tertiary",ghost:"",size:"small",onClick:Ne=>ee(n.key)},{default:t(()=>[e(le,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[e(D,{class:"select-preview-icon",size:"18"},{default:t(()=>[(_(),w(F(n.icon)))]),_:2},1024)]),default:t(()=>[u(" "+O(n.desc),1)]),_:2},1024)]),_:2},1032,["type","onClick"])),64))]),_:1})]),_:1})]),_:1}),e(s(Ee),{isCanvas:!0,chartStyles:s(o)},null,8,["chartStyles"]),e(ce,{style:{margin:"10px 0"}}),e(re,{class:"tabs-box",size:"small",type:"segment"},{default:t(()=>[(_(),k(V,null,H(X,n=>e(de,{key:n.key,name:n.key,size:"small","display-directive":"show:lazy"},{tab:t(()=>[e(v,null,{default:t(()=>[b("span",null,O(n.title),1),e(D,{size:"16",class:"icon-position"},{default:t(()=>[(_(),w(F(n.icon)))]),_:2},1024)]),_:2},1024)]),default:t(()=>[(_(),w(F(n.render)))]),_:2},1032,["name"])),64))]),_:1})])}}});const et=ye(Ge,[["__scopeId","data-v-bcb3ba8f"]]);export{et as default};
