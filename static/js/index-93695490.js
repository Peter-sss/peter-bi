var k=(t,e,n)=>new Promise((l,o)=>{var c=i=>{try{f(n.next(i))}catch(p){o(p)}},E=i=>{try{f(n.throw(i))}catch(p){o(p)}},f=i=>i.done?l(i.value):Promise.resolve(i.value).then(c,E);f((n=n.apply(t,e)).next())});import{M as N}from"./index-fe6f3520.js";import{_ as R}from"./index-372f3d27.js";import{u as G,P as U,f as x}from"./chartEditStore-e7279893.js";import{u as V,a as O}from"./chartLayoutStore-0dc7bb44.js";import{_ as q,M as z,f as D,d as L,e as Y,c as J}from"./index-465a140d.js";import{cz as Q,cA as I,cB as W,cC as X,g as Z,a as j,cD as tt,cE as et,cF as at,cG as nt,d as st,l as ot,a1 as rt,M as ct,aa as lt,b as y,o as _,c as m,q as C,F as it,s as dt,e as d,u as g,w as u,f as P,t as w,D as A,a6 as $,aq as _t,cH as ut,aF as ft,B as gt,C as pt,j as ht}from"./index-bc995034.js";import{a as mt,b as Ct,l as vt,g as yt}from"./plugin-b35dbe73.js";import{c as b}from"./index-3bf21822.js";import{i as bt}from"./icon-bb9a81d8.js";import"./index-39697381.js";import"./SettingItem-d387cdd8.js";/* empty css                                                                      */import"./SettingItemBox-4c5ddc0d.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-d3070662.js";import"./index.esm.min-a06079a4.js";import"./http-28ba3ba4.js";import"./fileTypeEnum-21359a08.js";function Et(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var St=Et;function kt(t,e,n){var l=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var c=Array(o);++l<o;)c[l]=t[l+e];return c}var xt=kt,Ot=Q,Dt=xt;function Lt(t,e){return e.length<2?t:Ot(t,Dt(e,0,-1))}var Pt=Lt,wt=I,At=St,$t=Pt,It=W;function Tt(t,e){return e=wt(e,t),t=$t(t,e),t==null||delete t[It(At(e))]}var Bt=Tt,Ft=X;function Kt(t){return Ft(t)?void 0:t}var Mt=Kt,Ht=j,Nt=nt,Rt=Bt,Gt=I,Ut=tt,Vt=Mt,qt=et,zt=at,Yt=1,Jt=2,Qt=4,Wt=qt(function(t,e){var n={};if(t==null)return n;var l=!1;e=Ht(e,function(c){return c=Gt(c,t),l||(l=c.length>1),c}),Ut(t,zt(t),n),l&&(n=Nt(n,Yt|Jt|Qt,Vt));for(var o=e.length;o--;)Rt(n,e[o]);return n}),Xt=Wt;const Zt=Z(Xt),jt=t=>(gt("data-v-2ca9f801"),t=t(),pt(),t),te={class:"go-content-charts-item-animation-patch"},ee=["onDragstart","onDragend","onDblclick","onClick"],ae={class:"list-header"},ne={class:"list-center go-flex-center go-transition",draggable:"true"},se={class:"list-bottom"},oe={key:0,class:"list-model"},re=["onClick"],ce=jt(()=>C("span",null,"删除",-1)),le=st({__name:"index",props:{menuOptions:{type:Array,default:()=>[]}},emits:["deletePhoto"],setup(t,{emit:e}){const n=G(),{TrashIcon:l}=bt.ionicons5,o=V(),c=ot(),E=a=>!a.disabled&&a.package===U.PHOTOS&&a.category===z.PRIVATE,f=rt(()=>o.getChartType),i=(a,s)=>{s.disabled||(b(s.chartKey,D(s)),b(s.conKey,L(s)),a.dataTransfer.setData(ut.DRAG_KEY,ft(Zt(s,["image"]))),n.setEditCanvas(x.IS_CREATE,!0))},p=()=>{n.setEditCanvas(x.IS_CREATE,!1)},T=a=>k(this,null,function*(){if(!a.disabled)try{mt(),b(a.chartKey,D(a)),b(a.conKey,L(a));let s=yield Y(a);a.redirectComponent&&(a.dataset&&(s.option.dataset=a.dataset),s.chartConfig.title=a.title,s.chartConfig.chartFrame=a.chartFrame),n.addComponentList(s,!1,!0),n.setTargetSelectChart(s.id),Ct()}catch(s){vt(),window.$message.warning("图表正在研发中, 敬请期待...")}}),B=a=>{var s;(s=a==null?void 0:a.configEvents)==null||s.addHandle(a)},F=(a,s)=>{yt({message:"是否删除此图片？",transformOrigin:"center",onPositiveCallback:()=>{const v=J();e("deletePhoto",a,s),v.deletePhotos(a,s)}})};return ct(()=>f.value,a=>{a===O.DOUBLE&&lt(()=>{c.value.classList.add("miniAnimation")})}),(a,s)=>{const v=y("n-ellipsis"),S=y("n-text"),K=y("n-icon"),M=y("n-button");return _(),m("div",te,[C("div",{ref_key:"contentChartsItemBoxRef",ref:c,class:_t(["go-content-charts-item-box",[g(f)===g(O).DOUBLE?"double":"single"]])},[(_(!0),m(it,null,dt(t.menuOptions,(r,H)=>(_(),m("div",{class:"item-box",key:r.title,draggable:"",onDragstart:h=>!r.disabled&&i(h,r),onDragend:h=>!r.disabled&&p(),onDblclick:h=>T(r),onClick:h=>B(r)},[C("div",ae,[d(g(N),{class:"list-header-control-btn",mini:!0,disabled:!0}),d(S,{class:"list-header-text",depth:"3"},{default:u(()=>[d(v,null,{default:u(()=>[P(w(r.title),1)]),_:2},1024)]),_:2},1024)]),C("div",ne,[r.icon?(_(),A(g(q),{key:0,class:"list-img",icon:r.icon,color:"#999",width:"48",style:{height:"auto"}},null,8,["icon"])):(_(),A(g(R),{key:1,class:"list-img",chartConfig:r},null,8,["chartConfig"]))]),C("div",se,[d(S,{class:"list-bottom-text",depth:"3"},{default:u(()=>[d(v,{style:{"max-width":"90%"}},{default:u(()=>[P(w(r.title),1)]),_:2},1024)]),_:2},1024)]),r.disabled?(_(),m("div",oe)):$("",!0),E(r)?(_(),m("div",{key:1,class:"list-tools go-transition",onClick:h=>F(r,H)},[d(M,{text:"",type:"default",color:"#ffffff"},{icon:u(()=>[d(K,null,{default:u(()=>[d(g(l))]),_:1})]),default:u(()=>[ce]),_:1})],8,re)):$("",!0)],40,ee))),128))],2)])}}});const De=ht(le,[["__scopeId","data-v-2ca9f801"]]);export{De as default};
