var be=Object.defineProperty,ke=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var de=(r,_,m)=>_ in r?be(r,_,{enumerable:!0,configurable:!0,writable:!0,value:m}):r[_]=m,Z=(r,_)=>{for(var m in _||(_={}))ye.call(_,m)&&de(r,m,_[m]);if(re)for(var m of re(_))we.call(_,m)&&de(r,m,_[m]);return r},ee=(r,_)=>ke(r,xe(_));import{d as _e,b6 as Ie,a7 as $e,r as oe,b as te,J as ue,a5 as z,Y as ne,cT as Ee,cU as Te,cV as He,x as s,c as v,e as k,h as e,w as o,f as i,F as L,j as B,an as se,O as Oe,Q as Se,l as d,am as Q,a2 as le,p as w,a6 as D,cW as ze,cX as De,y as pe,z as ve,A as me,L as ie,B as F,t as Re}from"./index-aa7518de.js";import{n as Ae}from"./noData-9e194391.js";import{g as U}from"./plugin-2ac2d336.js";import{i as fe}from"./icon-49f969d0.js";import{u as Ue,E as J}from"./chartEditStore-dcae2239.js";import{l as Le}from"./index-b3402de5.js";const ae=r=>(pe("data-v-04bb59e0"),r=r(),ve(),r),Be={key:0,class:"create-color-setting"},Pe=w("名称:"),Me=w("底部图表仅展示 7 条数据"),je={class:"color-list-box go-mt-3","x-gap":12,"y-gap":12,cols:4},Ne=w(" 删除颜色 "),Ve={class:"go-flex-items-center"},Fe=ae(()=>i("span",{class:"go-mr-4"},"添加",-1)),Je={class:"expend-color-box"},Qe=w("默认扩展色："),We=["onClick"],Xe=ae(()=>i("div",{class:"n-color-picker-checkboard"},null,-1)),Ye=w("透明扩展色："),qe=["onClick"],Ge=ae(()=>i("div",{class:"n-color-picker-checkboard"},null,-1)),Ke=_e({__name:"index",props:{selectColor:Object},emits:["updateColor"],setup(r,{emit:_}){const m=r;Ie(n=>({"3d26029e":u.color}));const{AddIcon:W,TrashIcon:X}=fe.ionicons5,Y=Le(()=>$e(()=>import("./index-2a23d2ed.js"),["peter-bi/static/js/index-2a23d2ed.js","peter-bi/static/js/index.esm.min-99d94c47.js","peter-bi/static/js/index-aa7518de.js","peter-bi/static/css/index-79930e9d.css","peter-bi/static/js/chartEditStore-dcae2239.js","peter-bi/static/js/plugin-2ac2d336.js","peter-bi/static/js/icon-49f969d0.js"])),l=oe(),u=te({index:-1,color:""});ue(()=>{var n;return(n=m.selectColor)==null?void 0:n.id},()=>{var n;l.value=z(m.selectColor),u.index=0,u.color=(n=l.value)==null?void 0:n.color[0]},{immediate:!0,deep:!1});const H=ne(()=>C(u.color)),C=n=>{if(!n)return{default:[],fade:[]};const a=36,f=[],I=[],t=[];for(let c=0;c<a;c++)I.unshift(Ee(n,1/100*(c+1))),f.push(Te(n,3.5/100*(c+1)));return f.forEach((c,b)=>{t.unshift(He(c,1/100*(b+1)))}),{default:[...I.reverse().splice(0,parseInt(`${a/2}`)-9),...f.splice(0,parseInt(`${a/2}`))],fade:t.reverse().splice(0,27)}},p=n=>({backgroundColor:n}),g=(n,a)=>{u.color=n,u.index=a},x=(n,a)=>{n&&(u.color=n),a&&(u.index=a),D(()=>{_("updateColor",l.value)})},P=(n,a)=>{const f=a?ze(n):De(n);l.value&&(l.value.color[u.index]=f),D(()=>{_("updateColor",l.value)})},R=()=>{var a,f,I;const n=((f=l.value)==null?void 0:f.color[((a=l.value)==null?void 0:a.color.length)-1])||"#2c2c31";(I=l.value)==null||I.color.push(n),D(()=>{_("updateColor",l.value)})},M=n=>{var a,f;(a=l.value)==null||a.color.splice(n,1),n===u.index&&x((f=l.value)==null?void 0:f.color[n-1],n-1)},q=()=>{D(()=>{_("updateColor",l.value)})};return(n,a)=>{const f=s("n-input-group-label"),I=s("n-input"),t=s("n-input-group"),c=s("n-tag"),b=s("n-space"),$=s("n-color-picker"),j=s("n-icon"),A=s("n-tooltip"),O=s("n-button"),G=s("n-scrollbar"),S=s("n-card"),N=s("n-text"),V=s("n-divider");return l.value?(v(),k("div",Be,[e(S,{bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(b,{justify:"space-between"},{default:o(()=>[e(t,null,{default:o(()=>[e(f,null,{default:o(()=>[Pe]),_:1}),e(I,{class:"create-color-name",value:l.value.name,"onUpdate:value":a[0]||(a[0]=y=>l.value.name=y),valueModifiers:{trim:!0},maxlength:"8","show-count":"",clearable:"",onChange:q},null,8,["value"])]),_:1}),e(c,{type:"warning"},{default:o(()=>[Me]),_:1})]),_:1}),e(G,{style:{"max-height":"132px"}},{default:o(()=>[i("div",je,[(v(!0),k(L,null,B(l.value.color,(y,h)=>(v(),k("div",{class:"color-list-item",key:h},[i("div",{class:se(["go-flex-items-center",{select:h===u.index}])},[e($,{style:{width:"95px"},value:l.value.color[h],"onUpdate:value":E=>l.value.color[h]=E,"show-preview":!0,modes:["hex"],onComplete:E=>x(E,h),"onUpdate:show":E=>g(y,h)},null,8,["value","onUpdate:value","onComplete","onUpdate:show"]),Oe(i("div",null,[e(A,{trigger:"hover"},{trigger:o(()=>[e(j,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3,onClick:E=>M(h)},{default:o(()=>[e(d(X))]),_:2},1032,["onClick"])]),default:o(()=>[Ne]),_:2},1024)],512),[[Se,h>5]])],2)]))),128)),i("div",null,[e(O,{type:"primary",secondary:"",onClick:R},{default:o(()=>[i("div",Ve,[Fe,e(j,{size:"16"},{default:o(()=>[e(d(W))]),_:1})])]),_:1})])])]),_:1})]),_:1}),i("div",Je,[e(S,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(N,null,{default:o(()=>[Qe]),_:1}),e(V,{style:{margin:"10px 0"}}),e(b,{size:[4,0],justify:"center"},{default:o(()=>[(v(!0),k(L,null,B(d(H).default,(y,h)=>(v(),k("div",{class:"color-computed-item",key:h,onClick:E=>P(y,!1)},[Xe,i("div",{style:Q(p(y))},null,4)],8,We))),128))]),_:1})]),_:1}),e(S,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(N,null,{default:o(()=>[Ye]),_:1}),e(V,{style:{margin:"10px 0"}}),e(b,{size:[4,0],justify:"center"},{default:o(()=>[(v(!0),k(L,null,B(d(H).fade,(y,h)=>(v(),k("div",{class:"color-computed-item",key:h,onClick:E=>P(y,!0)},[Ge,i("div",{style:Q(p(y))},null,4)],8,qe))),128))]),_:1})]),_:1})]),e(d(Y),{color:d(z)(l.value.color).splice(0,7)},null,8,["color"])])):le("",!0)}}});const Ze=me(Ke,[["__scopeId","data-v-04bb59e0"]]),he=r=>(pe("data-v-1aebdbd9"),r=r(),ve(),r),eo={class:"create-content"},oo={class:"create-color-setting-box"},to={key:1,class:"no-data go-flex-center"},no=["src"],so=w("暂未选择自定义颜色"),lo={class:"color-list-box"},ao={class:"color-list"},co=he(()=>i("span",null," 创建 ",-1)),ro=he(()=>i("span",null," 应用数据 ",-1)),io=w(" 暂无自定义颜色， "),_o=w("立即创建"),uo={class:"go-flex-items-center"},po=w(" 删除自定义颜色 "),vo=w("操作完成"),mo=_e({__name:"index",props:{modelShow:Boolean},emits:["update:modelShow","editSaveHandle"],setup(r,{emit:_}){const m=r,{DuplicateOutlineIcon:W,TrashIcon:X,ArrowDownIcon:Y}=fe.ionicons5,l={id:ie(),name:"未命名",color:["#6ae5bb","#69e3de","#5ac5ee","#5ac4ee","#4498ec","#3c7ddf"]},u=Ue(),H=oe(!1);let C=te(u.getEditCanvasConfig.chartCustomThemeColorInfo||[]);const p=oe(void 0),g=te({selectInfo:C[0]});ue(()=>m.modelShow,t=>{H.value=t,t&&C.length&&(g.selectInfo=C[0])});const x=ne(()=>{var t;return(t=g==null?void 0:g.selectInfo)==null?void 0:t.id}),P=ne(()=>u.getEditCanvasConfig.chartThemeColor),R=t=>{t.id!==x.value&&(p.value!==void 0?U({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{p.value=void 0,g.selectInfo=t}}):g.selectInfo=t)},M=()=>{const t=()=>{const c=ee(Z({},z(l)),{id:ie()});g.selectInfo=c,C.push(c),R(c),p.value=c,a(!1)};p.value!==void 0?U({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{p.value=void 0,t()}}):t()},q=t=>{const c=()=>{C.splice(t,1),u.setEditCanvasConfig(J.CHART_CUSTOM_THEME_COLOR_INFO,z(C)),D(()=>{C.length?R(C[t-1>-1?t-1:t]):g.selectInfo=void 0})};p.value!==void 0?U({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{p.value=void 0,c()}}):U({message:"是否删除此颜色？",onPositiveCallback:()=>{c()}})},n=t=>{p.value=t},a=(t=!0)=>{if(!p.value)return;const c=C.findIndex(b=>{var $;return b.id===(($=p.value)==null?void 0:$.id)});if(c!==-1){t&&window.$message.success("数据应用成功！");const b=z(ee(Z({},p.value),{name:p.value.name||"未定义"}));C.splice(c,1,b),p.value=void 0;const $=u.getEditCanvasConfig.chartThemeColor;u.setEditCanvasConfig(J.CHART_THEME_COLOR,"dark"),D(()=>{u.setEditCanvasConfig(J.CHART_CUSTOM_THEME_COLOR_INFO,z(C)),u.setEditCanvasConfig(J.CHART_THEME_COLOR,$)})}else window.$message.error("数据应用失败！")},f=()=>{const t=()=>{p.value=void 0,g.selectInfo=void 0,_("update:modelShow",!1)};p.value!==void 0?U({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{t()}}):t()},I=t=>`linear-gradient(to right, ${t.color[0]} 0%, ${t.color[5]} 100%)`;return(t,c)=>{const b=s("n-text"),$=s("n-timeline-item"),j=s("n-timeline"),A=s("n-icon"),O=s("n-button"),G=s("n-badge"),S=s("n-space"),N=s("n-divider"),V=s("n-a"),y=s("n-ellipsis"),h=s("n-card"),E=s("n-tooltip"),Ce=s("n-modal");return v(),F(Ce,{class:"go-chart-create-color",show:H.value,"onUpdate:show":c[0]||(c[0]=T=>H.value=T),"mask-closable":!1,closeOnEsc:!1},{default:o(()=>[e(h,{bordered:!1,role:"dialog",size:"small","aria-modal":"true",style:{width:"900px",height:"720px"}},{header:o(()=>[]),"header-extra":o(()=>[]),action:o(()=>[e(S,{justify:"end"},{default:o(()=>[e(O,{onClick:f},{default:o(()=>[vo]),_:1})]),_:1})]),default:o(()=>[i("div",eo,[i("div",oo,[d(x)?(v(),F(d(Ze),{key:0,selectColor:g.selectInfo,onUpdateColor:n},null,8,["selectColor"])):(v(),k("div",to,[i("img",{src:d(Ae),alt:"暂无数据"},null,8,no),e(b,{depth:3},{default:o(()=>[so]),_:1})]))]),i("div",lo,[e(j,{class:"pond-item-timeline",style:{width:"20px"}},{default:o(()=>[e($,{type:"info"}),e($,{type:"success"})]),_:1}),i("div",ao,[e(S,null,{default:o(()=>[e(O,{class:se(["create-btn",{"is-full":!d(x)}]),type:"primary",ghost:!d(x),secondary:!!d(x),onClick:M},{icon:o(()=>[e(A,null,{default:o(()=>[e(d(W))]),_:1})]),default:o(()=>[co]),_:1},8,["class","ghost","secondary"]),d(x)?(v(),F(G,{key:0,show:p.value!==void 0,dot:""},{default:o(()=>[e(O,{class:"create-btn",type:"info",secondary:"",onClick:a},{icon:o(()=>[e(A,null,{default:o(()=>[e(d(Y))]),_:1})]),default:o(()=>[ro]),_:1})]),_:1},8,["show"])):le("",!0)]),_:1}),e(N,{style:{margin:"10px 0"}}),d(x)?le("",!0):(v(),F(b,{key:0,class:"not-data-text",depth:3},{default:o(()=>[io,e(V,{onClick:M},{default:o(()=>[_o]),_:1})]),_:1})),(v(!0),k(L,null,B(d(C),(T,ce)=>(v(),k("div",{class:"color-card-box",key:ce},[e(h,{class:se(["color-card",{selected:T.id===d(x)}]),size:"small",hoverable:"",embedded:"",onClick:K=>R(T)},{default:o(()=>[i("div",uo,[e(y,{style:{"text-align":"left",width:"70px"}},{default:o(()=>[w(Re(T.name),1)]),_:2},1024),(v(!0),k(L,null,B(T.color,(K,ge)=>(v(),k("span",{class:"theme-color-item",key:ge,style:Q({backgroundColor:K})},null,4))),128))]),i("div",{class:"theme-bottom",style:Q({backgroundImage:I(T)})},null,4)]),_:2},1032,["class","onClick"]),e(E,{trigger:"hover"},{trigger:o(()=>[e(O,{text:"",disabled:T.id===d(P),onClick:K=>q(ce)},{default:o(()=>[e(A,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3},{default:o(()=>[e(d(X))]),_:1})]),_:2},1032,["disabled","onClick"])]),default:o(()=>[po]),_:2},1024)]))),128))])])])]),_:1})]),_:1},8,["show"])}}});const yo=me(mo,[["__scopeId","data-v-1aebdbd9"]]);export{yo as default};
