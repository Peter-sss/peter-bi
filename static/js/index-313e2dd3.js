var be=Object.defineProperty,ke=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var de=(r,_,m)=>_ in r?be(r,_,{enumerable:!0,configurable:!0,writable:!0,value:m}):r[_]=m,Q=(r,_)=>{for(var m in _||(_={}))ye.call(_,m)&&de(r,m,_[m]);if(re)for(var m of re(_))we.call(_,m)&&de(r,m,_[m]);return r},ee=(r,_)=>ke(r,xe(_));import{d as _e,b9 as Ie,ab as $e,l as oe,p as te,M as ue,a9 as D,a1 as ne,cW as Ee,cX as He,cY as Te,b as s,o as v,c as k,e,w as o,q as i,F as L,s as B,aq as se,R as Se,U as Oe,u as d,ap as W,a6 as le,f as w,aa as R,cZ as De,c_ as Re,B as pe,C as ve,j as me,N as ie,D as V,t as ze}from"./index-6978caf2.js";import{n as Ue}from"./noData-9e194391.js";import{g as A}from"./plugin-7d96af29.js";import{i as fe}from"./icon-7aaa208c.js";import{u as Ae,E as q}from"./chartEditStore-e9bb1111.js";import{l as Le}from"./index-25870e5b.js";const ae=r=>(pe("data-v-04bb59e0"),r=r(),ve(),r),Be={key:0,class:"create-color-setting"},Me=w("名称:"),Pe=w("底部图表仅展示 7 条数据"),Ne={class:"color-list-box go-mt-3","x-gap":12,"y-gap":12,cols:4},je=w(" 删除颜色 "),Fe={class:"go-flex-items-center"},Ve=ae(()=>i("span",{class:"go-mr-4"},"添加",-1)),qe={class:"expend-color-box"},We=w("默认扩展色："),Xe=["onClick"],Ye=ae(()=>i("div",{class:"n-color-picker-checkboard"},null,-1)),Ze=w("透明扩展色："),Ge=["onClick"],Je=ae(()=>i("div",{class:"n-color-picker-checkboard"},null,-1)),Ke=_e({__name:"index",props:{selectColor:Object},emits:["updateColor"],setup(r,{emit:_}){const m=r;Ie(n=>({"3d26029e":u.color}));const{AddIcon:X,TrashIcon:Y}=fe.ionicons5,Z=Le(()=>$e(()=>import("./index-27308d9d.js"),["static/js/index-27308d9d.js","static/js/index.esm.min-7fc3fe5c.js","static/js/index-6978caf2.js","static/css/index-79930e9d.css","static/js/chartEditStore-e9bb1111.js","static/js/plugin-7d96af29.js","static/js/icon-7aaa208c.js"])),l=oe(),u=te({index:-1,color:""});ue(()=>{var n;return(n=m.selectColor)==null?void 0:n.id},()=>{var n;l.value=D(m.selectColor),u.index=0,u.color=(n=l.value)==null?void 0:n.color[0]},{immediate:!0,deep:!1});const T=ne(()=>C(u.color)),C=n=>{if(!n)return{default:[],fade:[]};const a=36,f=[],I=[],t=[];for(let c=0;c<a;c++)I.unshift(Ee(n,1/100*(c+1))),f.push(He(n,3.5/100*(c+1)));return f.forEach((c,b)=>{t.unshift(Te(c,1/100*(b+1)))}),{default:[...I.reverse().splice(0,parseInt(`${a/2}`)-9),...f.splice(0,parseInt(`${a/2}`))],fade:t.reverse().splice(0,27)}},p=n=>({backgroundColor:n}),g=(n,a)=>{u.color=n,u.index=a},x=(n,a)=>{n&&(u.color=n),a&&(u.index=a),R(()=>{_("updateColor",l.value)})},M=(n,a)=>{const f=a?De(n):Re(n);l.value&&(l.value.color[u.index]=f),R(()=>{_("updateColor",l.value)})},z=()=>{var a,f,I;const n=((f=l.value)==null?void 0:f.color[((a=l.value)==null?void 0:a.color.length)-1])||"#2c2c31";(I=l.value)==null||I.color.push(n),R(()=>{_("updateColor",l.value)})},P=n=>{var a,f;(a=l.value)==null||a.color.splice(n,1),n===u.index&&x((f=l.value)==null?void 0:f.color[n-1],n-1)},G=()=>{R(()=>{_("updateColor",l.value)})};return(n,a)=>{const f=s("n-input-group-label"),I=s("n-input"),t=s("n-input-group"),c=s("n-tag"),b=s("n-space"),$=s("n-color-picker"),N=s("n-icon"),U=s("n-tooltip"),S=s("n-button"),J=s("n-scrollbar"),O=s("n-card"),j=s("n-text"),F=s("n-divider");return l.value?(v(),k("div",Be,[e(O,{bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(b,{justify:"space-between"},{default:o(()=>[e(t,null,{default:o(()=>[e(f,null,{default:o(()=>[Me]),_:1}),e(I,{class:"create-color-name",value:l.value.name,"onUpdate:value":a[0]||(a[0]=y=>l.value.name=y),valueModifiers:{trim:!0},maxlength:"8","show-count":"",clearable:"",onChange:G},null,8,["value"])]),_:1}),e(c,{type:"warning"},{default:o(()=>[Pe]),_:1})]),_:1}),e(J,{style:{"max-height":"132px"}},{default:o(()=>[i("div",Ne,[(v(!0),k(L,null,B(l.value.color,(y,h)=>(v(),k("div",{class:"color-list-item",key:h},[i("div",{class:se(["go-flex-items-center",{select:h===u.index}])},[e($,{style:{width:"95px"},value:l.value.color[h],"onUpdate:value":E=>l.value.color[h]=E,"show-preview":!0,modes:["hex"],onComplete:E=>x(E,h),"onUpdate:show":E=>g(y,h)},null,8,["value","onUpdate:value","onComplete","onUpdate:show"]),Se(i("div",null,[e(U,{trigger:"hover"},{trigger:o(()=>[e(N,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3,onClick:E=>P(h)},{default:o(()=>[e(d(Y))]),_:2},1032,["onClick"])]),default:o(()=>[je]),_:2},1024)],512),[[Oe,h>5]])],2)]))),128)),i("div",null,[e(S,{type:"primary",secondary:"",onClick:z},{default:o(()=>[i("div",Fe,[Ve,e(N,{size:"16"},{default:o(()=>[e(d(X))]),_:1})])]),_:1})])])]),_:1})]),_:1}),i("div",qe,[e(O,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(j,null,{default:o(()=>[We]),_:1}),e(F,{style:{margin:"10px 0"}}),e(b,{size:[4,0],justify:"center"},{default:o(()=>[(v(!0),k(L,null,B(d(T).default,(y,h)=>(v(),k("div",{class:"color-computed-item",key:h,onClick:E=>M(y,!1)},[Ye,i("div",{style:W(p(y))},null,4)],8,Xe))),128))]),_:1})]),_:1}),e(O,{class:"go-mt-3 expend-color",bordered:!1,role:"dialog",size:"small","aria-modal":"true"},{default:o(()=>[e(j,null,{default:o(()=>[Ze]),_:1}),e(F,{style:{margin:"10px 0"}}),e(b,{size:[4,0],justify:"center"},{default:o(()=>[(v(!0),k(L,null,B(d(T).fade,(y,h)=>(v(),k("div",{class:"color-computed-item",key:h,onClick:E=>M(y,!0)},[Je,i("div",{style:W(p(y))},null,4)],8,Ge))),128))]),_:1})]),_:1})]),e(d(Z),{color:d(D)(l.value.color).splice(0,7)},null,8,["color"])])):le("",!0)}}});const Qe=me(Ke,[["__scopeId","data-v-04bb59e0"]]),he=r=>(pe("data-v-1aebdbd9"),r=r(),ve(),r),eo={class:"create-content"},oo={class:"create-color-setting-box"},to={key:1,class:"no-data go-flex-center"},no=["src"],so=w("暂未选择自定义颜色"),lo={class:"color-list-box"},ao={class:"color-list"},co=he(()=>i("span",null," 创建 ",-1)),ro=he(()=>i("span",null," 应用数据 ",-1)),io=w(" 暂无自定义颜色， "),_o=w("立即创建"),uo={class:"go-flex-items-center"},po=w(" 删除自定义颜色 "),vo=w("操作完成"),mo=_e({__name:"index",props:{modelShow:Boolean},emits:["update:modelShow","editSaveHandle"],setup(r,{emit:_}){const m=r,{DuplicateOutlineIcon:X,TrashIcon:Y,ArrowDownIcon:Z}=fe.ionicons5,l={id:ie(),name:"未命名",color:["#6ae5bb","#69e3de","#5ac5ee","#5ac4ee","#4498ec","#3c7ddf"]},u=Ae(),T=oe(!1);let C=te(u.getEditCanvasConfig.chartCustomThemeColorInfo||[]);const p=oe(void 0),g=te({selectInfo:C[0]});ue(()=>m.modelShow,t=>{T.value=t,t&&C.length&&(g.selectInfo=C[0])});const x=ne(()=>{var t;return(t=g==null?void 0:g.selectInfo)==null?void 0:t.id}),M=ne(()=>u.getEditCanvasConfig.chartThemeColor),z=t=>{t.id!==x.value&&(p.value!==void 0?A({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{p.value=void 0,g.selectInfo=t}}):g.selectInfo=t)},P=()=>{const t=()=>{const c=ee(Q({},D(l)),{id:ie()});g.selectInfo=c,C.push(c),z(c),p.value=c,a(!1)};p.value!==void 0?A({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{p.value=void 0,t()}}):t()},G=t=>{const c=()=>{C.splice(t,1),u.setEditCanvasConfig(q.CHART_CUSTOM_THEME_COLOR_INFO,D(C)),R(()=>{C.length?z(C[t-1>-1?t-1:t]):g.selectInfo=void 0})};p.value!==void 0?A({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{p.value=void 0,c()}}):A({message:"是否删除此颜色？",onPositiveCallback:()=>{c()}})},n=t=>{p.value=t},a=(t=!0)=>{if(!p.value)return;const c=C.findIndex(b=>{var $;return b.id===(($=p.value)==null?void 0:$.id)});if(c!==-1){t&&window.$message.success("数据应用成功！");const b=D(ee(Q({},p.value),{name:p.value.name||"未定义"}));C.splice(c,1,b),p.value=void 0;const $=u.getEditCanvasConfig.chartThemeColor;u.setEditCanvasConfig(q.CHART_THEME_COLOR,"dark"),R(()=>{u.setEditCanvasConfig(q.CHART_CUSTOM_THEME_COLOR_INFO,D(C)),u.setEditCanvasConfig(q.CHART_THEME_COLOR,$)})}else window.$message.error("数据应用失败！")},f=()=>{const t=()=>{p.value=void 0,g.selectInfo=void 0,_("update:modelShow",!1)};p.value!==void 0?A({message:"当前有变动未保存，是否直接放弃修改？",onPositiveCallback:()=>{t()}}):t()},I=t=>`linear-gradient(to right, ${t.color[0]} 0%, ${t.color[5]} 100%)`;return(t,c)=>{const b=s("n-text"),$=s("n-timeline-item"),N=s("n-timeline"),U=s("n-icon"),S=s("n-button"),J=s("n-badge"),O=s("n-space"),j=s("n-divider"),F=s("n-a"),y=s("n-ellipsis"),h=s("n-card"),E=s("n-tooltip"),Ce=s("n-modal");return v(),V(Ce,{class:"go-chart-create-color",show:T.value,"onUpdate:show":c[0]||(c[0]=H=>T.value=H),"mask-closable":!1,closeOnEsc:!1},{default:o(()=>[e(h,{bordered:!1,role:"dialog",size:"small","aria-modal":"true",style:{width:"900px",height:"720px"}},{header:o(()=>[]),"header-extra":o(()=>[]),action:o(()=>[e(O,{justify:"end"},{default:o(()=>[e(S,{onClick:f},{default:o(()=>[vo]),_:1})]),_:1})]),default:o(()=>[i("div",eo,[i("div",oo,[d(x)?(v(),V(d(Qe),{key:0,selectColor:g.selectInfo,onUpdateColor:n},null,8,["selectColor"])):(v(),k("div",to,[i("img",{src:d(Ue),alt:"暂无数据"},null,8,no),e(b,{depth:3},{default:o(()=>[so]),_:1})]))]),i("div",lo,[e(N,{class:"pond-item-timeline",style:{width:"20px"}},{default:o(()=>[e($,{type:"info"}),e($,{type:"success"})]),_:1}),i("div",ao,[e(O,null,{default:o(()=>[e(S,{class:se(["create-btn",{"is-full":!d(x)}]),type:"primary",ghost:!d(x),secondary:!!d(x),onClick:P},{icon:o(()=>[e(U,null,{default:o(()=>[e(d(X))]),_:1})]),default:o(()=>[co]),_:1},8,["class","ghost","secondary"]),d(x)?(v(),V(J,{key:0,show:p.value!==void 0,dot:""},{default:o(()=>[e(S,{class:"create-btn",type:"info",secondary:"",onClick:a},{icon:o(()=>[e(U,null,{default:o(()=>[e(d(Z))]),_:1})]),default:o(()=>[ro]),_:1})]),_:1},8,["show"])):le("",!0)]),_:1}),e(j,{style:{margin:"10px 0"}}),d(x)?le("",!0):(v(),V(b,{key:0,class:"not-data-text",depth:3},{default:o(()=>[io,e(F,{onClick:P},{default:o(()=>[_o]),_:1})]),_:1})),(v(!0),k(L,null,B(d(C),(H,ce)=>(v(),k("div",{class:"color-card-box",key:ce},[e(h,{class:se(["color-card",{selected:H.id===d(x)}]),size:"small",hoverable:"",embedded:"",onClick:K=>z(H)},{default:o(()=>[i("div",uo,[e(y,{style:{"text-align":"left",width:"70px"}},{default:o(()=>[w(ze(H.name),1)]),_:2},1024),(v(!0),k(L,null,B(H.color,(K,ge)=>(v(),k("span",{class:"theme-color-item",key:ge,style:W({backgroundColor:K})},null,4))),128))]),i("div",{class:"theme-bottom",style:W({backgroundImage:I(H)})},null,4)]),_:2},1032,["class","onClick"]),e(E,{trigger:"hover"},{trigger:o(()=>[e(S,{text:"",disabled:H.id===d(M),onClick:K=>G(ce)},{default:o(()=>[e(U,{class:"go-ml-1 go-cursor-pointer",size:"16",depth:3},{default:o(()=>[e(d(Y))]),_:1})]),_:2},1032,["disabled","onClick"])]),default:o(()=>[po]),_:2},1024)]))),128))])])])]),_:1})]),_:1},8,["show"])}}});const yo=me(mo,[["__scopeId","data-v-1aebdbd9"]]);export{yo as default};
